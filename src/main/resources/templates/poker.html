<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="refresh" content="5"/>
    <title>Tech Poker</title>
    <script language="JavaScript" src="../static/js/jquery-3.1.1.min.js" data-th-src="@{/js/jquery-3.1.1.min.js}"></script>
    <script language="JavaScript" src="../static/js/bootstrap.min.js" data-th-src="@{/js/bootstrap.min.js}"></script>
    <script language="JavaScript" src="../static/js/qrcode.min.js" data-th-src="@{/js/qrcode.min.js}"></script>
    <script language="JavaScript" src="../static/js/techpoker.js" data-th-src="@{/js/techpoker.js}"></script>

    <link rel="stylesheet" href="../static/css/bootstrap.min.css" data-th-href="@{/css/bootstrap.min.css}"
          data-th-if="${currentSitePreference.normal}"/>
    <link rel="stylesheet" href="../static/css/bootstrap.min.css" data-th-href="@{/css/theme/cyborg/bootstrap.min.css}"
          data-th-if="${currentSitePreference.mobile || currentSitePreference.tablet}"/>
    <link rel="stylesheet" href="../static/css/techpoker.css" data-th-href="@{/css/techpoker.css}"/>
</head>
<body>
<div class="container">
    <div class="col-md-10">
        <div class="panel panel-default">
            <div class="panel-heading">
               Vote in Progress
            </div>
            <div class="panel-body">
                <div class="progress">
                    <div class="progress-bar" role="progressbar"
                         style="width: 60%;" data-th-style="${'width: '+(stats.playerVotes.size() > 0 ? (stats.currentVotes*100)/stats.playerVotes.size():0)+'%'}">
                        <span data-th-text="${stats.currentVotes}"></span>/<span
                            data-th-text="${stats.playerVotes.size()}"></span>
                    </div>
                </div>
                <ul class="list-group">
                    <li class="list-group-item" data-th-each="playerVote : ${stats.playerVotes}"
                        data-th-classappend="${playerVote.voted} ? 'list-group-item-success' : ''">
                        <span data-th-text="${playerVote.playerName}"></span>
                        <span class="pull-right">
                            <form data-th-action="@{/kick/__${gameId}__}" method="post">
                                <input type="hidden" name="playerId" data-th-value="${playerVote.playerId}">
                                <button class="btn btn-xs btn-danger" type="submit"><span class="glyphicon glyphicon-remove"></span></button>
                            </form>
                        </span>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-md-2">
        <div id="joinQr" data-qr-url="http://localhost/session/3847599023409"
             data-th-attr="data-qr-url=${externalUrl}+@{/join?gameId=__${gameId}__}"></div>
    </div>
    <div class="col-md-12">
        <form data-th-action="@{/result/__${gameId}__}" method="post" class="form-inline">
            <button type="submit" class="btn btn-primary">
                <span class="glyphicon glyphicon-check"></span> Finish Vote</button>
            <a href="websocket-master.html" data-th-href="@{/wm/__${gameId}__}" class="btn btn-default">
                <span class="glyphicon glyphicon-cloud"></span> Switch to Websockets</a>
        </form>
    </div>
</div>
</body>
</html>
